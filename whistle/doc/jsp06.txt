# jsp day 06

/WEB-INF/views/a/b/c/d/e/f/abcd.jsp

==> /sample/abc.ab=/WEB-INF/views/a/b/c/d/e/f/abcd.jsp

==> 요청 : localhost/whistle/sample/abc.ab

이후 작업 순서

1. 요청설계 작성
2. 컨트롤러를 제작하고
3. 요청 매핑하고
4. 뷰를 제작하고
5. 질의명령 작성하고
6. dao 함수 제작하고
7. 컨트롤러 완성하고

----------------------------------------------------------------------------------
커넥션 풀 (Connection Pool)
==> 데이터베이스에 접속하는 커넥션을 모아놓은 것
	
	웹 서버(톰캣) 이 시작될 때 데이터베이스가 제공하는 모든 커넥션(약간 적은)을
	미리 확보해 놓은 후
	필요할 때 확보해 놓은 커넥션을 제공하는 방법
	
	따라서 요청할 때 마다 다시 데이터베이스에 접속하는 상황은 발생하지 않고
	따라서 좀 더 빠르게 데이터베이스 작업을 할 수 있게 된다.

	필요한 이유
		데이터베이스를 사용할 때 가장 시간이 많이 걸리고
		서버에게 부담을 많이 주는 작업이 데이터베이스에 접속하는 작업이다.
		따라서 접속과 단절이 빈번하면 그만큼 시스템은 많은 시간을 소모하게 된다.
		
		예를 들어서 우리가 어떤 홈페이지에 접속을 했을 때
		가끔 응답 속도가 느린 경우
		대부분의 이유는 90% 정도가 데이터베이스 작업에서 문제가 생겼기 때문이다.
		
		하지만 우리가 지금까지 공부한 방법은
		누군가 요청하면 그 순간에 데이터베이스에 접속해서
		작업한 후 다시 닫는 방식으로 작업을 진행했었다.
		
		따라서 많은 접속자가 있는 경우에는 문제가 발생할 수 있다.

----------------------------------------------------------------------------------
커넥션 풀을 웹 서버에 등록하는 방법

	0. 먼저 커넥션 풀 작업을 지원하는 라이브러리가 필요하다.
	
		주의 ]
			과거에는 커넥션 풀을 위한 라이브러리가 독립되어서 제공되었는데
			자바 1.6 버전 이상부터는 jdbc 라이브러리와 통합되어서 제공되고 있다.
			만약 이전버전을 사용한다면
				commons.dbcp-?.?.jar
				commons.pool-?.?.jar
			을 구해서 설치해야 한다.

환경설정 파일에 커넥션 풀을 지정한다.

	1. server.xml 에 등록하는 방법
		
		<GlobalNamingResource>
			이부분에 설정을 기술한다.
		</GlobalNamingResource>
		
	2. context.xml 에 등록하는 방법
		context.xml 파일이 하는 일
		==> JSP (컨트롤러 포함) 에서 사용할 자원을
			등록하는 역할을 담당하는 설정파일이다.
			
				<Resource
					name="jdbc/TestDB"
					==> JSP 에서 이 자원 (커넥션 풀)을 사용할 때 구분할 이름
					
					autho="Container"
					==> 등록된 자원을 관리하는 객체 이름
						반드시 "Container" 라고 기술해야 한다.
						
					type="javax.sql.DataSource"
					==> 등록할 자원을 관리할 클래스 이름
						커넥션 풀은 javax.sql.DataSource 가 관리한다.
						
					maxTotal="8"
					==> 최대 확보할 커넥션 수
					
					maxIdle="2"
					==> 최소한 남겨놓아야할 응급 커넥션 수를 의미
					
					maxWaitMillis="10000"
					==> 누군가 요청을 했을 때 커넥션이 부족하면 대기를 해야하는데
						그 대기시간을 설정하는 속성
						
					username="jennie"
					password="12345"
					driverClassName="oracle.jdbc.driver.OracleDriver"
					url="jdbc:oracle:thin:@localhost:1521:xe"
				/>









